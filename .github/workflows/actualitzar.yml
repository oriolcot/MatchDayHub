name: Sherlock Holmes Debug

on:
  workflow_dispatch: # Nom√©s manual per ara

permissions:
  contents: write

jobs:
  debug_job:
    runs-on: ubuntu-latest

    steps:
      - name: üì• Baixar el codi
        uses: actions/checkout@v3

      - name: üêç Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: üì¶ Instal¬∑lar llibreries
        run: pip install requests

      # PAS 1: Mirem qu√® coi hi ha dins del fitxer generator.py
      - name: üßê INSPECCIONAR generator.py
        run: |
          echo "================ CONTINGUT DEL SCRIPT ================"
          cat generator.py
          echo "======================================================"

      # PAS 2: Mirem si el JSON t√© dades realment
      - name: üßê INSPECCIONAR memoria_partits.json
        run: |
          echo "================ MIDA DEL JSON ================"
          ls -lh memoria_partits.json
          echo "================ PRIMERES 20 L√çNIES DEL JSON ================"
          head -n 20 memoria_partits.json

      # PAS 3: Executem el script DIRECTAMENT a la consola (sense amagar el resultat)
      - name: üöÄ EXECUTAR SENSE FILTRES
        run: |
          echo "Iniciant execuci√≥..."
          python generator.py
          echo "Finalitzat."